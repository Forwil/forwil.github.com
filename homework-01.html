<!DOCTYPE html>
<html lang="en">

<head>
  <link rel="stylesheet/less" type="text/css" href="http://localhost:8000/theme/css/style.less">
  <script src="http://localhost:8000/theme/js/less-1.3.3.min.js" type="text/javascript"></script>
  <!-- <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/css/style.css"> -->

  <link rel="stylesheet" type="text/css" href="http://localhost:8000/theme/css/pygments.css">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=PT+Sans|PT+Serif|PT+Mono">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width; initial-scale=1.0">
  <meta name="author" content="Forwil">
  <meta name="description" content="Posts and writings by Forwil">

  <link href="http://localhost:8000/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Flat Land Full Atom Feed" />

<meta name="keywords" content="">

  <title>
homework-01  </title>

</head>

<body>
  <aside>
    <div id="user_meta">
      <a href="http://localhost:8000">
        <img src="http://hdn.xnimg.cn/photos/hdn521/20130912/1145/tiny_aDyr_4739000119a6111a.jpg" alt="logo">
      </a>
      <h2><a href="http://localhost:8000">Forwil</a></h2>
      <p></p>
      <ul>
        <li><a href="http://localhost:8000/pages/about-me.html">About Me</a></li>
        <li><a href="/feeds/all.atom.xml" target="_blank">RSS</a></li>
      </ul>
    </div>
  </aside>

  <main>
    <header>
<p>Posted on Sat 21 September 2013</p>
    </header>

<article>
  <div id="article_title">
    <h3><a href="http://localhost:8000/homework-01.html">homework-01</a></h3>
  </div>
  <div id="article_text">
    <h2>参考书选择</h2>
<p>选了电子版---[代码大全2英文版(完整清晰版)].chm</p>
<p>穷逼没钱买书好烦躁T.T</p>
<h2>问题分析</h2>
<h3>一维的情况</h3>
<p>最朴素最暴力的方法是枚举所有的sum[i,j]，算出其值然后取最大。</p>
<p>时间复杂度为O(N^3)，注意到sum[i,j]=sum[i,j-1]+a[j]，所以不必每个sum[i,j]都重新算一遍，只需要通过前面的值来递推即可。时间复杂度降为O(N^2)</p>
<p>我们对所有的sum[i,j]来分类，用tail[j]表示所有的sum[i,j]的最大值，即tail[j]=max{sum[i,j]|1&lt;=i&lt;=j}，表示所有由a[j]结尾的子串中的最大的和。</p>
<p>那么我们的目标转化为求最大的tail，不过这样分析起来似乎没有任何的优化。</p>
<p>不过我们发现，假设tail[j-1]已经求出了，那么tail[j]只有取两种情况：</p>
<p>以tail[j-1]和a[j]组成新的子串
放弃tail[j-1]，重新由a[j]为一单独的新串。
因此我们得到如下状态转移方程：</p>
<p>tail[j]=max{tail[j-1]+a[j],a[j]}</p>
<p>求解问题只需从小到大遍历一遍O(N)的状态空间，每次转移需要O(1)时间复杂度，所以总共只有O(N)时间复杂度。</p>
<h3>二维的情况</h3>
<p>在有了一维度的解答之后，我们很容易想到通过枚举上下界来把二维的问题转化为一维，需要枚举C(N,2)+N种上下界，每一种需要O(M)时间复杂度来计算，因此总共需要O(N^2*M)的时间复杂度</p>
<h1>编程实现</h1>
<h2>一维的情况</h2>
<div class="highlight"><pre><span class="cp">#include&lt;stdio.h&gt;</span>
<span class="cp">#define MAXN 100000</span>
<span class="cp">#define MINV (-(1&lt;&lt; 31 -1))</span>
<span class="kt">int</span> <span class="nf">maxsum</span><span class="p">(</span><span class="kt">int</span> <span class="n">p</span><span class="p">[],</span><span class="kt">int</span> <span class="n">size</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">sum</span><span class="p">,</span><span class="n">ans</span><span class="p">;</span>
    <span class="n">ans</span><span class="o">=</span><span class="n">MINV</span><span class="p">;</span>
    <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">size</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sum</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span>
            <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="n">sum</span><span class="o">+=</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sum</span><span class="o">&gt;</span><span class="n">ans</span><span class="p">)</span>
            <span class="n">ans</span><span class="o">=</span><span class="n">sum</span>    <span class="p">;</span>    
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">n</span><span class="p">,</span><span class="n">p</span><span class="p">[</span><span class="n">MAXN</span><span class="p">];</span>
    <span class="n">freopen</span><span class="p">(</span><span class="s">&quot;input1.txt&quot;</span><span class="p">,</span><span class="s">&quot;r&quot;</span><span class="p">,</span><span class="n">stdin</span><span class="p">);</span>
    <span class="n">freopen</span><span class="p">(</span><span class="s">&quot;output1.txt&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">,</span><span class="n">stdout</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
                    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">maxsum</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">n</span><span class="p">));</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h2>二维的情况</h2>
<div class="highlight"><pre><span class="cp">#include&lt;stdio.h&gt;</span>
<span class="cp">#define MAXN 1000</span>
<span class="cp">#define MAXM 1000</span>
<span class="cp">#define MINV (-(1&lt;&lt; 31 -1))</span>
<span class="kt">int</span> <span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">,</span><span class="n">a</span><span class="p">[</span><span class="n">MAXN</span><span class="p">][</span><span class="n">MAXM</span><span class="p">];</span>
<span class="kt">int</span> <span class="nf">maxsum</span><span class="p">(</span><span class="kt">int</span> <span class="n">N</span><span class="p">,</span><span class="kt">int</span> <span class="n">M</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">,</span><span class="n">k</span><span class="p">,</span><span class="n">sum</span><span class="p">,</span><span class="n">ans</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">p</span><span class="p">[</span><span class="n">M</span><span class="p">];</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="n">ans</span><span class="o">=</span><span class="n">MINV</span><span class="p">;</span>
    <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">N</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
            <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
            <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span><span class="n">k</span><span class="o">++</span><span class="p">)</span>
                <span class="p">{</span>
                <span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">+=</span><span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">][</span><span class="n">k</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">sum</span><span class="o">&lt;</span><span class="mi">0</span><span class="p">)</span>
                    <span class="n">sum</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
                <span class="n">sum</span><span class="o">+=</span><span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">];</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">sum</span><span class="o">&gt;</span><span class="n">ans</span><span class="p">)</span>
                    <span class="n">ans</span><span class="o">=</span><span class="n">sum</span><span class="p">;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">k</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">k</span><span class="o">&lt;</span><span class="n">M</span><span class="p">;</span><span class="n">k</span><span class="o">++</span><span class="p">)</span><span class="n">p</span><span class="p">[</span><span class="n">k</span><span class="p">]</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="k">return</span> <span class="n">ans</span><span class="p">;</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">;</span>
    <span class="n">freopen</span><span class="p">(</span><span class="s">&quot;input2.txt&quot;</span><span class="p">,</span><span class="s">&quot;r&quot;</span><span class="p">,</span><span class="n">stdin</span><span class="p">);</span>
    <span class="n">freopen</span><span class="p">(</span><span class="s">&quot;output2.txt&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">,</span><span class="n">stdout</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">n</span><span class="p">);</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">m</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">for</span><span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">m</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
                    <span class="p">{</span>
                    <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%d,&quot;</span><span class="p">,</span><span class="o">&amp;</span><span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
                    <span class="c1">//printf(&quot;%d &quot;,a[i][j]);</span>
                    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span><span class="n">maxsum</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">m</span><span class="p">));</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<h1>测试结果</h1>
<p>input1.txt</p>
<blockquote>
<p>6,
5,6,-3,8,-9,2</p>
</blockquote>
<p>output1.txt</p>
<blockquote>
<p>16</p>
</blockquote>
<p>input2.txt</p>
<blockquote>
<p>3,
6,
5,6,-3,8,-9,2
1,-12,20,0,-3,-5
-9,-7,-3,6,7,-1</p>
</blockquote>
<p>output2.txt</p>
<blockquote>
<p>28</p>
</blockquote>
  </div>
  <div id="article_meta">
    <p>Category: <a href="http://localhost:8000/category/misc.html">misc</a></p>
    <p>Comments: <a href="#" onclick="javascript:toggleComments();return false;">toggle</a></p>
  </div>

    <div id="article_comments" style="display:block">
        <div id="disqus_thread"></div>
        <script type="text/javascript">
           var disqus_identifier = "homework-01.html";
           (function() {
           var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
           dsq.src = 'http://flatland.disqus.com/embed.js';
           (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        </script>
    </div>

</article>

    <footer>
<p><a href="http://localhost:8000/" class="button_accent">&larr; Back to Index</a></p>
<script language="javascript">
    function toggleComments() {
        var commentDiv = document.getElementById("article_comments");
        (commentDiv.style.display == "none") ? commentDiv.style.display = "block" : commentDiv.style.display = "none";
        return false;
    }
</script>
    </footer>

    <div id="ending_message">
      <p>&copy Forwil. Built using <a href="http://getpelican.com" target="_blank">Pelican</a>. Theme by Giulio Fidente on <a href="https://github.com/giulivo/pelican-svbhack" target="_blank">github</a>. .</p>
    </div>
  </main>
</body>
</html>